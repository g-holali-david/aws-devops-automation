# Prometheus Configuration - Auto-generated by Terraform
# Generated: 2025-11-06T14:42:06Z
#
# Copy to WSL: /etc/prometheus/prometheus.yml

global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    cluster: 'aws-devops-automation'
    environment: 'production'

scrape_configs:
  # Prometheus itself
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']
        labels:
          instance: 'prometheus-server'

  # Ansible server via NLB
  - job_name: 'ansible-server'
    static_configs:
      - targets: ['aws-devops-dev-nlb-ansible-2c114d428cfbe79e.elb.us-east-1.amazonaws.com:9100']
        labels:
          instance: 'ansible-srv'
          source: 'nlb'
          role: 'ansible-controller'

  # Jenkins servers (Node Exporter)
  - job_name: 'jenkins-servers'
    static_configs:
      - targets: ['54.85.53.233:9100']
        labels:
          instance: 'jenkins-srv1'
          role: 'jenkins'
      - targets: ['52.87.185.1:9100']
        labels:
          instance: 'jenkins-srv2'
          role: 'jenkins'

  # Jenkins application metrics via ALB
  - job_name: 'jenkins-application'
    metrics_path: '/prometheus'
    static_configs:
      - targets: ['aws-devops-dev-alb-jenkins-1407761627.us-east-1.elb.amazonaws.com:8080']
        labels:
          application: 'jenkins'
          source: 'alb'
